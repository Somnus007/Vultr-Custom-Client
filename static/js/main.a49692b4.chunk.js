(this["webpackJsonpcra-pwa"]=this["webpackJsonpcra-pwa"]||[]).push([[0],{21:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c}));var a={SET_COMMON_STATE:"SET_COMMON_STATE",CHANGE_LOCALE:"CHANGE_LOCALE"},r={SET_ACCOUNT_STATE:"SET_ACCOUNT_STATE",LOGIN:"LOGIN",LOGOUT:"LOGOUT"},o={SET_HOME_STATE:"SET_HOME_STATE",MOVIE_LIST:"MOVIE_LIST"},c={SET_PERSIST_STATE:"SET_PERSIST_STATE"}},342:function(e,t,n){e.exports=n(675)},583:function(e,t,n){},609:function(e,t,n){},613:function(e,t,n){},668:function(e,t,n){},675:function(e,t,n){"use strict";n.r(t);n(343),n(246),n(390);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),i=(n(583),n(58)),s=n(323),u=n(41),l=n(324),p=n(332),d=n(156),h=n(325),m=n.n(h),f=n(42),b=n(303),v=n(210),g=n(125),E=n(37),O=n(67),T=n.n(O),y=n(21),S=T()({accountList:null});function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.a.SET_ACCOUNT_STATE:return e.merge(Object(E.a)({},t.payload));default:return e}}var w=T()({movieList:null});function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.c.SET_HOME_STATE:return e.merge(Object(E.a)({},t.payload));default:return e}}var _={"en-US":{authorizationDenied:"Authorization Denied",loginFirst:"Please login first",authorizationExpired:"Authorization Expired",loginAgain:"please login again",login:"Login",loginPage:"Login Page"},"zh-CN":{authorizationDenied:"\u9a8c\u8bc1\u5931\u8d25",loginFirst:"\u8bf7\u5148\u767b\u5f55\u60a8\u7684\u8d26\u53f7",authorizationExpired:"\u6388\u6743\u8fc7\u671f",loginAgain:"\u8bf7\u91cd\u65b0\u767b\u5f55",login:"\u767b\u5f55",loginPage:"\u767b\u5f55\u9875\u9762"}},C=T()({accountInfo:null,authorized:!1,authorizedDate:0,lang:"en-US",locale:_["en-US"]});function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.d.SET_PERSIST_STATE:return e.merge(Object(E.a)({},t.payload));default:return e}}var x=T()({httpErrorStatus:0});function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.b.SET_COMMON_STATE:return e.merge(Object(E.a)({},t.payload));default:return e}}var N=n(38),z=n.n(N),I=n(54),P="/v1";"/"===(P="https://api.vultr.com"+P)[P.length-1]&&(P=P.slice(0,-1));var M={AUTH_INFO:"".concat(P,"/auth/info"),ACCOUNT_INFO:"".concat(P,"/account/info")},U=("".concat(P,"/document/research"),n(158)),D=n.n(U),R=function(){var e=le.store.getState().persist.accountInfo;return{headers:{"API-Key":e?e.apiKey:""},timeout:6e3}};D.a.interceptors.request.use((function(e){var t=le.store.getState().persist.authorizedDate;if(t&&((new Date).getTime()-t)/1e3/60/60>8){return Promise.reject({response:{status:403},data:{message:"Authorization Expired"}})}return e}),(function(e){return Promise.reject(e)})),D.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.response,n=le.store,a=t?t.status:-1;switch(!0){case 401===a:case 403===a:-1===window.location.href.indexOf("/login")&&(n.dispatch({type:y.a.LOGOUT}),n.dispatch({type:y.b.SET_COMMON_STATE,payload:{httpErrorStatus:a}}));break;case 404===a:console.log("The API does not exist, please contact the developers");break;case 500===a||502===a||503===a:n.dispatch({type:y.b.SET_COMMON_STATE,payload:{httpErrorStatus:a}});break;default:console.error(t)}return Promise.reject(e)}));var G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){var r=Object(E.a)({},t,{url:e});D()(r).then((function(e){n(e.data)})).catch((function(e){a(e)})).finally((function(e){n(e)}))}))},H={get:function(e,t){return G(e,Object(E.a)({},R(),{method:"get",params:t}))},post:function(e,t){return G(e,Object(E.a)({},R(),{method:"post",data:t}))},put:function(e,t){return G(e,Object(E.a)({},R(),{method:"put",data:t}))},delete:function(e,t){return G(e,Object(E.a)({},R(),{method:"delete",params:t}))},fetch:function(e,t){return G(e,Object(E.a)({},R(),{},t))}},W=z.a.mark(V),F=z.a.mark(B),K=z.a.mark(J);function V(e){var t,n,a,r,o,c;return z.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.email,n=e.apiKey,a=e.callback,r={},i.prev=2,i.next=5,H.fetch(M.AUTH_INFO,{method:"get",headers:{"API-Key":n}});case 5:r=i.sent,i.next=11;break;case 8:i.prev=8,i.t0=i.catch(2),console.log(i.t0&&i.t0.response);case 11:if(r.email!==t){i.next=17;break}return o=(new Date).getTime(),c={name:r.name,email:t,apiKey:n},i.next=16,Object(I.b)({type:y.d.SET_PERSIST_STATE,payload:{accountInfo:c,authorizedDate:o,authorized:!0}});case 16:a();case 17:case"end":return i.stop()}}),W,null,[[2,8]])}function B(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.b)({type:y.d.SET_PERSIST_STATE,payload:{accountInfo:null,authorized:!1,authorizedDate:0}});case 2:case"end":return e.stop()}}),F)}function J(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)([Object(I.c)(y.a.LOGIN,V),Object(I.c)(y.a.LOGOUT,B)]);case 2:case"end":return e.stop()}}),K)}var q=z.a.mark(Q),$=z.a.mark(X);function Q(e){var t;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.lang,n.next=3,Object(I.b)({type:y.d.SET_PERSIST_STATE,payload:{lang:t,locale:_[t]||_["en-US"]}});case 3:case"end":return n.stop()}}),q)}function X(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)([Object(I.c)(y.b.CHANGE_LOCALE,Q)]);case 2:case"end":return e.stop()}}),$)}var Y=z.a.mark(Z);function Z(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)([J(),X()]);case 2:case"end":return e.stop()}}),Y)}var ee=[],te=Object(p.a)();ee.push(te);var ne=Object(f.b)();ee.push(Object(b.a)(ne));var ae,re=[u.applyMiddleware.apply(void 0,ee)],oe=l.composeWithDevTools.apply(void 0,re),ce={key:"root",storage:m.a,whitelist:["persist"],stateReconciler:v.seamlessImmutableReconciler,transforms:[Object(v.seamlessImmutableTransformCreator)({})]},ie=Object(d.persistReducer)(ce,(ae=ne,Object(u.combineReducers)({router:Object(g.b)(ae),persist:k,account:j,home:A,common:L}))),se=Object(u.createStore)(ie,oe),ue=Object(d.persistStore)(se);te.run(Z);var le={store:se,persistor:ue},pe=(n(609),n(59)),de=n(60),he=n(62),me=n(61),fe=n(63),be=n(52),ve=[{path:"/login",component:r.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,805))})),exact:!0},{path:"/projects",component:r.a.lazy((function(){return n.e(7).then(n.bind(null,796))})),exact:!0},{path:"/documents",component:r.a.lazy((function(){return n.e(5).then(n.bind(null,797))})),exact:!0},{path:"/jobAdmin",component:r.a.lazy((function(){return n.e(6).then(n.bind(null,798))})),exact:!0},{path:"/userManagement",component:r.a.lazy((function(){return n.e(8).then(n.bind(null,799))})),exact:!0},{path:"/404",component:r.a.lazy((function(){return n.e(9).then(n.bind(null,800))})),exact:!0},{path:"/500",component:r.a.lazy((function(){return n.e(10).then(n.bind(null,801))})),exact:!0}],ge=n(218),Ee=function(e){var t=e.children;return r.a.createElement("div",{className:"page blank-layout"},t)},Oe=n(82),Te=function(e){function t(e){var n;return Object(pe.a)(this,t),(n=Object(he.a)(this,Object(me.a)(t).call(this,e))).state={},n}return Object(fe.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props.children;return r.a.createElement("div",{className:"page main-layout"},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},r.a.createElement(Oe.b,{to:"/login"},"login"),r.a.createElement(Oe.b,{to:"/projects"},"projects"),r.a.createElement(Oe.b,{to:"/documents"},"documents"),r.a.createElement(Oe.b,{to:"/jobAdmin"},"jobAdmin"),r.a.createElement(Oe.b,{to:"/userManagement"},"userManagement")),e)}}]),t}(r.a.Component),ye=n(95),Se=n(676),je=(n(613),function(e){function t(){var e,n;Object(pe.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(he.a)(this,(e=Object(me.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){(0,n.props.dispatch)({type:y.b.CHANGE_LOCALE,lang:e})},n}return Object(fe.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props.persist.lang;return r.a.createElement("div",{className:"languageSwitch"},r.a.createElement(ye.a,{className:"icon",type:"global"}),r.a.createElement(Se.a,{value:e,onChange:this.onChange},r.a.createElement(Se.a.Option,{value:"en-US"},"English"),r.a.createElement(Se.a.Option,{value:"zh-CN"},"\u7b80\u4f53\u4e2d\u6587")))}}]),t}(r.a.PureComponent)),we=Object(i.c)((function(e){return{persist:e.persist}}))(je),Ae=function(e){function t(e){var n;return Object(pe.a)(this,t),(n=Object(he.a)(this,Object(me.a)(t).call(this,e))).checkPermission=function(){var e=n.props,t=e.persist.authorized,a=e.history,r=a.location.pathname,o=a.push;"/login"===r&&t&&o("/projects"),"/login"===r||"/500"===r||"/404"===r||t||o("/login")},n.updateLocaleState=function(){var e=n.props,t=e.dispatch,a=e.persist.lang;t({type:y.b.CHANGE_LOCALE,lang:a})},n.setupLayout=function(){var e=n.props,t=e.persist.authorized,a=e.children;return t?r.a.createElement(Te,null,a):r.a.createElement(Ee,null,a)},n.state={},n}return Object(fe.a)(t,e),Object(de.a)(t,[{key:"componentDidMount",value:function(){this.updateLocaleState(),this.checkPermission()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.router.location.pathname,a=t.common.httpErrorStatus,r=t.history.push,o=e.router.location.pathname,c=e.common.httpErrorStatus;o!==n&&this.checkPermission(),!c&&a&&(401===a||403===a?r("/login"):0===String(a).indexOf("50")&&r("/500"))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.Helmet,{titleTemplate:"%s - Customized Vultr",title:"Customized Vultr"}),r.a.createElement("div",{style:{position:"fixed",top:16,right:48,zIndex:99}},r.a.createElement(we,null)),this.setupLayout())}}]),t}(r.a.Component),_e=Object(be.g)(Object(i.c)((function(e){return{persist:e.persist,router:e.router,common:e.common}}))(Ae)),Ce=n(677),ke=n(215),xe=n.n(ke),Le=(n(668),function(e){function t(){return Object(pe.a)(this,t),Object(he.a)(this,Object(me.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(de.a)(t,[{key:"componentDidMount",value:function(){xe.a.start()}},{key:"componentWillUnmount",value:function(){xe.a.done()}},{key:"render",value:function(){var e=r.a.createElement(ye.a,{type:"loading"});return r.a.createElement("div",{className:"globalLoading"},r.a.createElement(Ce.a,{indicator:e,size:"large"}))}}]),t}(r.a.PureComponent)),Ne=Object(i.c)((function(e){return{persist:e.persist}}))(Le),ze=function(e){function t(){return Object(pe.a)(this,t),Object(he.a)(this,Object(me.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,{history:ne},r.a.createElement(a.Suspense,{fallback:r.a.createElement(Ne,null)},r.a.createElement(_e,null,r.a.createElement(be.d,null,ve.map((function(e){return r.a.createElement(be.b,{path:e.path,component:e.component,key:e.path,exact:e.exact})})),r.a.createElement(be.a,{from:"/",exact:!0,to:"/login"}),r.a.createElement(be.a,{from:"/**",to:"/404"})))))}}]),t}(r.a.PureComponent),Ie=le.store,Pe=le.persistor;var Me=function(){return r.a.createElement(i.a,{store:Ie},r.a.createElement(s.a,{loading:null,persistor:Pe},r.a.createElement("div",{className:"App"},r.a.createElement(ze,null))))},Ue=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function De(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(674);c.a.render(r.a.createElement(Me,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/cra-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/cra-pwa","/service-worker.js");Ue?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):De(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):De(t,e)}))}}()}},[[342,1,2]]]);
//# sourceMappingURL=main.a49692b4.chunk.js.map